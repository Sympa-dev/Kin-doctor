{% extends 'core/base.html' %}

{% load static %}

{% block content %}

{% if messages %}
{% for message in messages %}
    <div class="alert alert-{% if message.tags %}{{ message.tags }}{% endif %} alert-dismissible fade show" role="alert" style="position: fixed; top: 20px; right: 20px; z-index: 1050; max-width: 400px;">
        <div class="d-flex">
            <div class="me-3">
                <i class="fas fa-exclamation-circle"></i>
            </div>
            <div>
                <h6 class="alert-heading mb-1">Message</h6>
                <p class="mb-0">{{ message }}</p>
            </div>
        </div>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
{% endfor %}
{% endif %}

<div class="container-fluid py-4">
    <div class="row">
        <!-- Header -->
        <div class="col-12 mb-4">
            <div class="register-doctor-form">
                <!-- Content -->
                <div class="p-4" style="max-height: 80vh; overflow-y: auto;">
                    <form method="post">
                        {% csrf_token %}
                        
                        <div class="row g-4">
                            <!-- Personal Information -->
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Nom</label>
                                    <input type="text" name="name" class="form-control">
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Post-nom</label>
                                    <input type="text" name="first_name" class="form-control">
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Prénom</label>
                                    <input type="text" name="last_name" class="form-control">
                                </div>
                            </div>

                            <!-- Contact Information -->
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Genre</label>
                                    <select name="gender" class="form-select">
                                        <option value="">Sélectionner</option>
                                        <option value="male">Homme</option>
                                        <option value="female">Femme</option>
                                    </select>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Date de naissance</label>
                                    <input type="date" name="birth_date" class="form-control">
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Téléphone</label>
                                    <input type="tel" name="phone_number" class="form-control">
                                </div>
                            </div>

                            <!-- Professional Information -->
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label class="form-label">Email</label>
                                    <input type="email" name="email" class="form-control">
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Numéro d'ordre</label>
                                    <input type="text" name="order_number" class="form-control">
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Département</label>
                                    <select name="department" class="form-select">
                                        <option value="">Sélectionner le département</option>
                                        {% for department in departments %}
                                            <option value="{{ department.id }}">{{ department.name }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Address -->
                        <div class="mb-4">
                            <label class="form-label">Adresse</label>
                            <textarea name="address" rows="3" class="form-control"></textarea>
                        </div>

                        <!-- Software Access -->
                        <div class="">
                            <span class="mb-1 text-blue-900"><i class="fas fa-lock"></i> Accès au logiciel</span>
                            <div class="form-check d-flex align-items-center gap-2">
                                <input type="checkbox" name="has_access" class="form-check-input" id="hasAccess" style="width: 1.2rem; height: 1.2rem;">
                                <label class="form-check-label" for="hasAccess">
                                    Donner l'accès au logiciel à ce médecin
                                </label>
                            </div>
                        </div>

                        <!-- Submit Buttons -->
                        <div class="d-flex justify-content-end gap-2">
                            <button type="submit" class="btn btn-primary">
                                Ajouter Médecin
                            </button>
                            <a href="{% url 'render_page' 'dashboard' %}" class="btn btn-light">
                                Annuler
                            </a>
                        </div>
                        
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
{% endblock %}
