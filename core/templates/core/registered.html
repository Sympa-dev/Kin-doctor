{% extends 'core/base.html' %}

{% block content %}


{% if messages %}
{% for message in messages %}
    <div class="alert alert-{% if message.tags %}{{ message.tags }}{% endif %} alert-dismissible fade show" role="alert" style="position: fixed; top: 20px; right: 20px; z-index: 1050; max-width: 400px;">
        <div class="d-flex">
            <div class="me-3">
                <i class="fas fa-exclamation-circle"></i>
            </div>
            <div>
                <h6 class="alert-heading mb-1">Message</h6>
                <p class="mb-0">{{ message }}</p>
            </div>
        </div>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
{% endfor %}
{% endif %}

    <div class="container-fluid mt-3">
        <div class="row mb-3">
            <div class="col-md-8">
                <div class="card py-2 px-3 shadow-sm">

                    <h5 class="card-title text-center"><i class="fas fa-user-md"></i> Enregistrement du nouveau medecin</h5>
                    <hr>
                    <form class="mt-2" method="post" style="position: relative;top: -10px;">
                        {% csrf_token %}
                        <div class="mb-3">
                            <label class="form-label text-primary fw-semibold">Nom d'utilisateur</label>
                            <input type="text" class="form-control border-primary" placeholder="Choisissez un nom d'utilisateur" name="username">
                        </div>

                        <div class="row mb-3">
                            <div class="col">
                                <label class="form-label text-primary fw-semibold">Prénom</label>
                                <input type="text" class="form-control border-primary" placeholder="Entrez votre prénom" name="first_name">
                            </div>
                            <div class="col">
                                <label class="form-label text-primary fw-semibold">Nom</label>
                                <input type="text" class="form-control border-primary" placeholder="Entrez votre nom" name="last_name">
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label text-primary fw-semibold">Email</label>
                            <input type="email" class="form-control border-primary" placeholder="Entrez votre email" name="email">
                        </div>

                        <div class="mb-4">
                            <label class="form-label text-primary fw-semibold">Type d'utilisateur</label>
                            <select class="form-select border-primary" name="user_type">
                                <option value="doctor">Docteur</option>
                                <option value="admin">Administrateur</option>
                                <option value="nurse">Infirmier</option>
                                <option value="pharmacist">Pharmacien</option>
                                <option value="receptionist">Réceptionniste</option>
                                <option value="lab_technician">Technicien de laboratoire</option>
                            </select>
                        </div>

                        <button type="submit" class="btn btn-primary w-100 py-2 shadow-sm hover-shadow">
                            <i class="fas fa-user-plus me-2"></i> Enregistrer
                        </button>
                    </form>
            </div>
            </div>
            <div class="col-md-4">
                <div class="card shadow-sm">
                    <div class="card-header bg-light">
                        <i class="fas fa-user-md me-2"></i> Liste des Médecins
                    </div>
                    <div class="card-body">
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item d-flex justify-content-between">
                                <i class="fas fa-check-circle text-success me-2"></i> Médecins actifs
                                <span class="badge bg-success rounded-pill">{{ doctors_active.count }}</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                                <i class="fas fa-times-circle text-muted me-2"></i> Médecins non actifs
                                <span class="badge bg-secondary rounded-pill">{{ doctors_non_active.count }}</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
    </div>

{% endblock %}
